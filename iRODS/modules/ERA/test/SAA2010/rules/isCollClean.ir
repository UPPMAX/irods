isCollClean||msiAddSelectFieldToGenQuery(DATA_ID,COUNT,*GenQInp)##msiAddConditionToGenQuery(COLL_NAME,"=",*collection,*GenQInp)##msiAddConditionToGenQuery(META_DATA_ATTR_NAME,"like","INFECTED%",*GenQInp)##msiExecGenQuery(*GenQInp,*GenQOut)##forEachExec(*GenQOut,msiGetValByKey(*GenQOut,"DATA_ID",*objCount),nop)##msiAddSelectFieldToGenQuery(DATA_ID,COUNT,*GenQInp1)##msiAddConditionToGenQuery(COLL_NAME,"like","*collection/%",*GenQInp1)##msiAddConditionToGenQuery(META_DATA_ATTR_NAME,"like","INFECTED%",*GenQInp1)##msiExecGenQuery(*GenQInp1,*GenQOut1)##forEachExec(*GenQOut1,msiGetValByKey(*GenQOut1,"DATA_ID",*objCount1),nop)##assign(*count,"*objCount + *objCount1")##writeLine(stdout,*count)|nop##nop##nop##nop##nop##nop##nop##nop##nop##nop##nop##nop##nop
*collection=$1
ruleExecOut
